# backend/Dockerfile.executor
FROM node:18-alpine

# Install required system dependencies
RUN apk add --no-cache g++ make python3

# Set working directory
WORKDIR /app

# Install only production dependencies
COPY package*.json ./
RUN npm ci --only=production

# Copy the executor script
COPY src/services/executionService.js ./src/services/

# Run the executor
CMD ["node", "src/services/executionService.js"]